@()
<div ng-controller="TaxonomyCtrl" ng-init="init(treatments.getTreatment().code)">

   <ul class="nav nav-tabs">
   	<li class="active"><a data-target="#main" data-toggle="tab">@Messages("readsets.taxonomy.tabs.bilan")</a></li>
   	<li ><a data-target="#krona" data-toggle="tab">@Messages("readsets.taxonomy.tabs.krona")</a></li>    
   	<li ><a data-target="#phylogeneticTree" data-toggle="tab">@Messages("readsets.taxonomy.tabs.phylogeneticTree")</a></li>    	
   </ul>
	
<div class="tab-content">
<div class="tab-pane active" id="main">
		<div class="span4">		
			<div class="divTaxonBilan">	
				<table class="table table-condensed table-hover table-bordered">
					<thead>
					<tr>
						<th colspan="3">
							@Messages("readsets.taxonomy.taxonBilan")
						</th>
					</tr>
					<tr>
						<th>
							@Messages("readsets.taxonomy.taxonBilan.taxon")
						</th>
						<th>
							@Messages("readsets.taxonomy.nbSeq")
						</th>
						<th>
							@Messages("readsets.taxonomy.percent")
						</th>
					</tr>
					</thead>
					<tbody>
					<tr>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInTaxonBilan">
							
							<!--  TODO : to backup ! -->
							 <a href="
							 	@Messages("readsets.taxonomy.beginNcbiUrl")
							 	{{obj.taxon.replace(' ','+')}}
							 	@Messages("readsets.taxonomy.endNcbiUrl")
							 	" target='_blank'> 
							 	{{obj.taxon}} 
							 </a>
							</li>
							</ul>
						</td>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInTaxonBilan">
							 {{obj.nbSeq | number}}
							</li>
							</ul>					
						</td>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInTaxonBilan">
							 {{ obj.percent | number:2}} @(" %")
							</li>
							</ul>					
						</td>
					</tr>
					</tbody>				
				</table>
			</div>
		</div>
		
		<div class="span1"></div>

		<div class="span3">	
		   <div class="row">
				<table class="table table-condensed table-hover table-bordered">
					<thead>
					<tr>
						<th colspan="3">
							@Messages("readsets.taxonomy.divisionBilan")
						</th>
					</tr>
					<tr>
						<th>
							@Messages("readsets.taxonomy.divisionBilan.division")
						</th>
						<th>
							@Messages("readsets.taxonomy.nbSeq")
						</th>
						<th>
							@Messages("readsets.taxonomy.percent")
						</th>
					</tr>					
					</thead>
					<tbody>
					<tr>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInDivisionBilan">
							 {{obj.division}}
							</li>
							</ul>
						</td>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInDivisionBilan">
							 {{obj.nbSeq | number}}
							</li>
							</ul>					
						</td>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInDivisionBilan">
							 {{ obj.percent | number:2}} @(" %")
							</li>
							</ul>					
						</td>
					</tr>
					</tbody>
				</table>
			</div>			
		</div>
		
		<div class="span1"></div>
		
		<div class="span3">
			<div class="row">
				<table class="table table-condensed table-hover table-bordered">
					<thead>
					<tr>
						<th colspan="3">
							@Messages("readsets.taxonomy.keywordBilan")
						</th>
					</tr>
					<tr>
						<th>
							@Messages("readsets.taxonomy.keywordBilan.keyword")
						</th>
						<th>
							@Messages("readsets.taxonomy.nbSeq")
						</th>
						<th>
							@Messages("readsets.taxonomy.percent")
						</th>
					</tr>					
					</thead>
					<tbody>	
					<tr>	
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInKeywordBilan">
							 {{obj.keyword}}
							</li>
							</ul>
						</td>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInKeywordBilan">
							 {{obj.nbSeq | number}}
							</li>
							</ul>					
						</td>
						<td>
							<ul class="unstyled">
							<li ng-repeat="obj in objsInKeywordBilan">
							 {{ obj.percent | number:2}} @(" %")
							</li>
							</ul>					
						</td>
					</tr>
					</tbody>
				</table>
			</div>
			<div class="row">
				<table class="table table-condensed table-hover table-bordered">
					<thead>
					<tr>
						<th class="span1">
							@Messages("readsets.taxonomy.sampleInput")
						</th>
						<th class="span1">
							@Messages("readsets.taxonomy.organism")
						</th>
						<th class="span1">
							@Messages("readsets.taxonomy.taxonomy")
						</th>	
					</tr>
					</thead>
					<tbody>
					<tr>
						<td>
							{{readset.treatments[treatments.getTreatment().code].read1.sampleInput.value | number}}
						</td>
						<td>
							{{readset.treatments[treatments.getTreatment().code].read1.organism.value}}
						</td>
						<td>
							{{readset.treatments[treatments.getTreatment().code].read1.taxonomy.value}}
						</td>		
					</tr>
					</tbody>
				</table>			
			</div>	
		</div>
	
</div>

<div class="tab-pane" id="krona">
	<iframe class="span12" ng-bind-src="krona" style="border:0;height:600px" />
</div>
<div class="tab-pane" id="phylogeneticTree">
		
    <div class="thumbnail" data-target="#myModal" role="button" data-toggle="modal" 
	ng-click="setImage(readset.treatments[treatments.getTreatment().code].read1.phylogeneticTree.value,'phylogeneticTree','',1000)">
	 <a href="#">
	    <img id="read1.phylogeneticTree" ng-src="data:image/png;base64,{{readset.treatments[treatments.getTreatment().code].read1.phylogeneticTree.value}}" />	 
	 </a>   
    </div>
		
</div>
</div>
	

</div>
