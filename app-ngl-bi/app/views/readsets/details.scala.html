@()
<div class="row-fluid">
	<div class="page-header" ng-init="init()">
		 <h1 ng-switch on="readset.productionValuation.valid">		
		 	<span ng-switch-when="FALSE" class="text-error">{{readset.code}}</span> 
		 	<span ng-switch-when="TRUE" class="text-success">{{readset.code}}</span> 
		 	<span ng-switch-default class="mute">{{readset.code}}</span> 
		 	<small>   
		 	<span ng-model="readset.state.code" codes="state"/>
		 	</small>
		 	<div class="btn-toolbar pull-right" ng-show="isEditMode()">
			 	<button class="btn" ng-click="save()" data-toggle="tooltip" title="@Messages("button.validate")" ><i class="icon-save icon-large"></i> @Messages("button.validate")</button>
			 	<button class="btn" ng-click="cancel()" data-toggle="tooltip" title="@Messages("button.cancel")" ><i class="icon-undo icon-large"></i> @Messages("button.cancel")</button>
		 	</div>
		 	<div class="btn-toolbar pull-right" ng-hide="isEditMode()">
				<button class="btn" ng-click="activeEditMode()" data-toggle="tooltip" title="@Messages("button.edit")" ><i class="icon-edit icon-large"></i>@Messages("button.edit")</button>
			</div>
		 </h1>
	</div>
</div>

<div class="row-fluid" messages="messages"></div>

<ul class="nav nav-tabs">
	<li class="active"><a href="#" data-target="#general" data-toggle="tab">@Messages("readsets.tabs.general")</a></li>
	<li><a href="#" data-target="#advanced" data-toggle="tab">@Messages("readsets.tabs.advanced")</a></li>    
</ul>


		
<div class="tab-content">
	
	<div class="tab-pane active" id="general">
	
		<div class="row-fluid">
			<form class="form-horizontal">
				<div class="span4">
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.code")</dt>
						<dd >{{readset.code}}</dd>				
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.state.code")</dt>
						<dd ng-model='readset.state.code' codes="state"></dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.productionValuation.valid")</dt>
						<dd>
						<div ng-switch on="isEditMode()">
							<div ng-switch-when="false" ng-model='readset.productionValuation.valid' codes="valuation"/>
							<div ng-switch-when="true"><div bt-select class="span12" ng-model="readset.productionValuation.valid" bt-options="valid.code as valid.name for valid in lists.getValuations()"></div></div>
						</div>
						</dd>
					</dl>					
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.productionValuation.resolutions")</dt>
						<dd>
							<div bt-select class="span12" ng-model="readset.productionValuation.resolutionCodes" multiple="true" bt-options="valid.code as valid.name group by valid.category.name for valid in lists.getResolutions()" ng-edit="isEditMode()"></div>							
						</dd>
						
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.productionValuation.criteria")</dt>
						<dd>
						<div ng-switch on="isEditMode()">
							<div ng-switch-when="false" ng-model="readset.productionValuation.criteriaCode" codes="valuation_criteria"/>
							<div ng-switch-when="true"><div bt-select class="span12" ng-model="readset.productionValuation.criteriaCode" bt-options="valid.code as valid.name for valid in lists.getValuationCriterias()"></div></div>
						</div>
						</dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.valuation.user")</dt>
						<dd>{{readset.productionValuation.user}} ({{readset.productionValuation.date | date:'@Messages("date.format")'}})</dd>				
					</dl>
				</div>
				<div class="span4">
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.treatments.global.usefulSequences")</dt>
						<dd>{{readset.treatments.global["default"].usefulSequences.value |	number}}</dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.treatments.global.usefulBases")</dt>
						<dd>{{readset.treatments.global["default"].usefulBases.value | number}}</dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.bioinformaticValuation.valid")</dt>
						<dd>
						<div ng-switch on="isEditMode()">
							<div ng-switch-when="false" ng-model='readset.bioinformaticValuation.valid' codes="valuation"/>
							<div ng-switch-when="true"><div bt-select class="span12" ng-model="readset.bioinformaticValuation.valid" bt-options="valid.code as valid.name for valid in lists.getValuations()"></div></div>
						</div>
						</dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.bioinformaticValuation.resolutions")</dt>
						<dd>
						<div bt-select class="span12" ng-model="readset.bioinformaticValuation.resolutionCodes" multiple="true" bt-options="valid.code as valid.name group by valid.category.name for valid in lists.getResolutions()" ng-edit="isEditMode()"></div>
						</dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.bioinformaticValuation.criteria")</dt>
						<dd>
						<div ng-switch on="isEditMode()">
							<div ng-switch-when="false" ng-model="readset.bioinformaticValuation.criteriaCode" codes="valuation_criteria"/>
							<div ng-switch-when="true"><div bt-select class="span12" ng-model="readset.bioinformaticValuation.criteriaCode" bt-options="valid.code as valid.name for valid in lists.getValuationCriterias()"></div></div>
						</div>
						</dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.valuation.user")</dt>
						<dd>{{readset.bioinformaticValuation.user}} ({{readset.bioinformaticValuation.date | date:'@Messages("date.format")'}})</dd>				
					</dl>
				</div>
				<div class="span4">
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.runCode") / @Messages("readsets.laneNumber")</dt>
						<dd><button class="btn btn-link" type="button" ng-click="goToRun()">{{readset.runCode}}</button> / {{readset.laneNumber}}</dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.runType")</dt>
						<dd>{{run.typeCode}}</dd>
					</dl>
					
					<dl class="dl-horizontal">
						<dt>@Messages("readsets.nbCycles")</dt>
						<dd>{{run.treatments.ngsrg["default"].nbCycle.value}}</dd>
					</dl>			
				</div>
			</form>		
		</div>
		
		
		<div ng-switch on="isEditMode()">
			<div ng-switch-when="true">
				<dl class="dl-horizontal">
					<dt>@Messages("readsets.productionValuation.comment")</dt>
					<dd><textarea ng-model="readset.productionValuation.comment"></textarea></dd>				
				</dl>
			</div>
		</div>
		
           
		<div class="row-fluid">	
			<div class="span12">
			@views.html.commons.treatments()
			</div>
		</div>
		
	</div>
	
	
	<div class="tab-pane" id="advanced">
	
		<div class="row-fluid">
			<div class="span6">
				<dl class="dl-horizontal">
					<dt>@Messages("readsets.archiveId")</dt>
					<dd>{{readset.archiveId}}</dd>				
				</dl>
				<dl class="dl-horizontal">
					<dt>@Messages("readsets.archiveDate")</dt>
					<dd>{{readset.archiveDate | date:'@Messages("datetime.format")'}}</dd>
				</dl>
				<dl class="dl-horizontal">
					<dt>@Messages("readsets.files.path")</dt>
					<dd>{{readset.path}}</dd>
				</dl>		
				<dl class="dl-horizontal">
					<dt>@Messages("readsets.properties.isSentCCRT")</dt>
					<dd>
						<div ng-switch on="readset.properties.isSentCCRT.value">
							<i ng-switch-when="true" class="icon-check icon-large"></i>
							<i ng-switch-default class="icon-check-empty icon-large"></i>
						</div>
					</dd>
				</dl>
				<dl class="dl-horizontal">
					<dt>@Messages("readsets.properties.isSentCollaborator")</dt>
					<dd>
						<div ng-switch on="readset.properties.isSentCollaborator.value">
							<i ng-switch-when="true" class="icon-check icon-large"></i>
							<i ng-switch-default class="icon-check-empty icon-large"></i>
						</div>
					</dd>
				</dl>				
			</div>		
		</div>
		<div class="row-fluid">
			<div class="span8">
				<table class="table table-condensed table-hover table-bordered">
					<thead>
						<tr>
							<th>@Messages("readsets.files.fullname")</th>
							<th>@Messages("readsets.files.typeCode")</th>
							<th>@Messages("readsets.files.usable")</th>
							<th>@Messages("readsets.files.properties.label")</th>
							<th>@Messages("readsets.files.properties.asciiEncoding")</th>
							<th>@Messages("readsets.files.properties.md5")</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="file in readset.files">
							<td>{{file.fullname}}</td>
							<td>{{file.typeCode}}</td>
							<td ng-if="file.usable == true">@Messages("readsets.files.isUsable")</td>
							<td ng-if="file.usable == false">@Messages("readsets.files.isNotUsable")</td>
							<td>{{file.properties.label.value}}</td>
							<td>{{file.properties.asciiEncoding.value}}</td>
							<td>{{file.properties.md5.value}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>	
		
	</div>


</div>

<!-- ----------------------------------------------------------------------------- -->
<!-- Modal to display image in full size -->
	<div id="myModal" class="modal hide fade"  tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true" style="left:{{modalLeft}}px; width:{{modalWidth}}px; height:{{modalHeight}}px; margin-left:0px">
		<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal"
				aria-hidden="true">&times;</button>
			<h3>{{readset.code}}</h3>	
			<h4 id="myModalLabel">{{modalTitle}}</h4>
		</div>
		<div>
			<img src="data:image/png;base64,{{modalImage}}"  />
		</div>
	</div>

<!-- -------------------------------------------------------------------------------- -->
	