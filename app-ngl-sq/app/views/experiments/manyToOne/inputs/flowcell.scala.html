@(laneCount:java.lang.Integer)

<div class="row" ng-controller="FlowcellCtrl">
	<div style="width:1000px;margin-right:auto;margin-left:auto">
		<div ng-model="inputContainers" droppable style="position:relative;float:left;margin-right:20px">
			<p  ng-if="inputContainers.length==0">Inputs</p>
			<table ng-show="inputContainers.length>0" class="table pull-left" style="margin-right:50px" >
				<th>
					<td>
						@Messages("containers.table.percentage")
					</td>
					<td>
						@Messages("containers.table.tags")
					</td>
					<td>
						@Messages("containers.table.sampleTypes")
					</td>
					<td>
						@Messages("containers.table.libProcessTypeCodes")
					</td>
					<td>
					</td>
				</th>
				<tr ng-model="container" ng-repeat="container in inputContainers" draggable>
					<td>
						{{container.code}}
					</td>
					<td>
						<input class="form-control" type="text" placeholder="" class="input-small" ng-model="container.percentage" />
					</td>
					<td>
						<div ng-repeat="content in container.contents">
							{{content.properties.tag}}
						</div>
					</td>
					<td>
						<div ng-repeat="content in container.contents">
							{{content.sampleTypeCode}}
						</div>
					</td>
					<td>
						<div ng-repeat="content in container.contents">
							{{content.libProcessTypeCode}}
						</div>
					</td>
					<td>
					<button ng-click="duplicateContainer(container)"><i class="fa fa-plus-square"></i></button>
					</td>
				</tr>
			</table>
		</div>
	
		<table class="table" style="width:200px;">
		@for(i <- 0 to laneCount-1) {
		<tr>
			<td>
				@(i+1)
			</td>
			<td ng-model="experiment.value.atomicTransfertMethods[@i].inputContainerUseds" droppable style="width:200px;height:20px">
				<table ng-show="experiment.value.atomicTransfertMethods[@i].inputContainerUseds.length > 0" class="table">
				<th>
					<td>
						@Messages("containers.table.percentage")
					</td>
					<td>
						@Messages("containers.table.tags")
					</td>
					<td>
						@Messages("containers.table.sampleTypes")
					</td>
					<td>
						@Messages("containers.table.libProcessTypeCodes")
					</td>
					<td>
					</td>
				</th>
					<tr ng-repeat="flowcell in experiment.value.atomicTransfertMethods[@i].inputContainerUseds"  ng-model="flowcell"  draggable>
						<td>
							{{flowcell.code}}
						</td>
						<td>
							<input class="form-control " type="text" placeholder="" class="input-small" ng-model="flowcell.percentage" />
						</td>
						<td>
							<div ng-repeat="content in flowcell.contents">
								{{content.properties.tag}}
							</div>
						</td>
						<td>
							<div ng-repeat="content in flowcell.contents">
								{{content.sampleTypeCode}}
							</div>
						</td>
						<td>
							<div ng-repeat="content in flowcell.contents">
								{{content.libProcessTypeCode}}
							</div>
						</td>
					</tr>
				</table>
			</td>
			<td>
			<table ng-show="experiment.value.atomicTransfertMethods[@i].inputContainerUseds.length > 0" class="table">
				<th>
					<td ng-repeat="property in experiment.containerOutProperties">
						{{property.name}}
					</td>
				</th>
			    <tr>
			    <td>
			    </td>
					<td style="min-width: 70px" ng-repeat="property in experiment.containerOutProperties">
								<div ng-switch on="property.choiceInList">
								<input class="form-control" type="text" ng-switch-when="false" 
									ng-readonly="!experiment.experimentProperties.enabled"
									placeholder="{{property.name}}"
									ng-model="experiment.value.atomicTransfertMethods[@i].outputContainerUsed.experimentProperties[property.code].value"
								/>
									
								<select class="form-control"  
										ng-readonly="!experiment.experimentInformation.enabled" 
										ng-disabled="!experiment.experimentInformation.enabled" 
										ng-model="experiment.value.atomicTransfertMethods[@i].outputContainerUsed.experimentProperties[property.code].value"
										ng-switch-when="true" 
										auto-select>
									<option ng-repeat="opt in property.possibleValues" value="{{opt.value}}">{{opt.value}}</option>
								   </select>
					</td>
			</tr>
			</table>
			</td>
		</tr>
		}
		</table>
	</div>
	<div class="col-md-12 col-lg-12" datatable="datatable"></div>
</div>