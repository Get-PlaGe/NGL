@(laneCount:java.lang.Integer)

<div class="row" ng-controller="FlowcellCtrl" ng-init="init_flowcell(@laneCount)">
	<div class="col-md-12 col-lg-12" style="margin-right:auto;margin-left:auto">
		<div ng-model="inputContainers" droppable class="col-md-6 col-lg-6" style="margin-bottom:10px;border-width:1px;border-style:dashed;border-color:black;">
			<p  ng-show="inputContainers.length==0"><i class="fa fa-download"></i> Inputs</p>
			<table ng-show="inputContainers.length>0" class="table">
				<tr>
					<th>
					</th>
					<th>
						@Messages("containers.table.code")
					</th>
					<th>
						@Messages("containers.table.percentage")
					</th>
					<th>
						@Messages("containers.table.tags")
					</th>
					<th>
						@Messages("containers.table.sampleTypes")
					</th>
					<th>
						@Messages("containers.table.libProcessTypeCodes")
					</th>
				</tr>
				<tr ng-model="container" ng-repeat="container in inputContainers" draggable>
					<td>
						<button ng-click="deleteInput(container)"><i class="fa fa-trash-o"></i></button>
					</td>
					<td>
						{{container.code}}
					</td>
					<td>
						<input class="form-control" type="text" placeholder="" class="input-small" ng-model="container.percentage" />
					</td>
					<td  title="{{getTags(container.contents) | unique}}">
						<div ng-repeat="content in container.contents | unique:'properties.tag.value' |  limitTo:12">
								{{content.properties.tag.value}}
							</div>
					</td>
					<td title="{{getSampleTypeCodes(container.contents) | unique}}">
						<div ng-repeat="content in container.contents | unique:'sampleTypeCode' |  limitTo:12">
							{{content.sampleTypeCode}}
						</div>
					</td>
					<td title="{{getLibProcessTypeCodes(container.contents) | unique}}">
						<div ng-repeat="content in container.contents | unique:'properties.libProcessTypeCode.value'">
							{{content.properties.libProcessTypeCode.value}}
						</div>
					</td>
					<td>
					<button ng-click="duplicateContainer(container)"><i class="fa fa-plus-square"></i></button>
					</td>
				</tr>
			</table>
		</div>
		<div class="col-md-5 col-lg-5">
		<h2>@Messages("experiments.flowcell.design") :</h2>
		<table class="table" style="width:200px;">
		@for(i <- 0 to laneCount-1) {
		<tr>
			<td>
				<button ng-click="hideRow(@i)"><i ng-show="rows[@i]" class="fa fa-eye-slash"></i><i  ng-show="!rows[@i]" class="fa fa-eye"></i></button>
			</td>
			<td>
				<b>@(i+1)</b>
			</td>
			<td ng-show="rows[@i]">
			<table ng-show="experiment.value.atomicTransfertMethods[@i].inputContainerUseds.length > 0" class="table">
				<tr>
					<th ng-repeat="property in experiment.containerOutProperties">
						{{property.name}}
					</th>
				</tr>
			    <tr>
					<td style="min-width:70px" ng-repeat="property in experiment.containerOutProperties">
								<div ng-switch on="property.choiceInList">
								<input class="form-control" type="text" ng-switch-when="false" 
									ng-readonly="!experiment.experimentProperties.enabled"
									
									ng-model="experiment.value.atomicTransfertMethods[@i].outputContainerUsed.experimentProperties[property.code].value"
								/>
									
								<select class="form-control"  
										ng-readonly="!experiment.experimentInformation.enabled" 
										ng-disabled="!experiment.experimentInformation.enabled" 
										ng-model="experiment.value.atomicTransfertMethods[@i].outputContainerUsed.experimentProperties[property.code].value"
										ng-switch-when="true" 
										auto-select>
									<option ng-repeat="opt in property.possibleValues" value="{{opt.value}}">{{opt.value}}</option>
								   </select>
					</td>
			</tr>
			</table>
			</td>
			<td ng-model="experiment.value.atomicTransfertMethods[@i].inputContainerUseds" droppable style="width:200px;height:20px">
				<table ng-show="experiment.value.atomicTransfertMethods[@i].inputContainerUseds.length > 0 && rows[@i]" class="table">
				<tr>
					<th>
						@Messages("containers.table.code")
					</th>
					<th>
						@Messages("containers.table.percentage")
					</th>
					<th>
						@Messages("containers.table.tags")
					</th>
					<th>
						@Messages("containers.table.sampleTypes")
					</th>
					<th>
						@Messages("containers.table.libProcessTypeCodes")
					</th>
				</tr>
					<tr ng-repeat="flowcell in experiment.value.atomicTransfertMethods[@i].inputContainerUseds"  ng-model="flowcell"  draggable>
						<td>
							{{flowcell.code}}
						</td>
						<td>
							<input class="form-control " type="text" placeholder="" class="input-small" ng-model="flowcell.percentage" />
						</td>
						<td  title="{{getTags(flowcell.contents) | unique}}">
						<div ng-repeat="content in flowcell.contents | unique:'properties.tag.value' |  limitTo:12">
								{{content.properties.tag.value}}
							</div>
					</td>
					<td title="{{getSampleTypeCodes(flowcell.contents) | unique}}">
						<div ng-repeat="content in flowcell.contents | unique:'sampleTypeCode' |  limitTo:12">
							{{content.sampleTypeCode}}
						</div>
					</td>
					<td title="{{getLibProcessTypeCodes(flowcell.contents) | unique}}">
						<div ng-repeat="content in flowcell.contents | unique:'properties.libProcessTypeCode.value'">
							{{content.properties.libProcessTypeCode.value}}
						</div>
					</td>
					<td>
							<button ng-click="deleteInputOnAtomic(@i,container)"><i class="fa fa-trash-o"></i></button>
				    </td>
					</tr>
				</table>
			</td>
		</tr>
		}
		</table>
		</div>
	</div>
	<div class="col-md-12 col-lg-12" datatable="datatable"></div>
</div>