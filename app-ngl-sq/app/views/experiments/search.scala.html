@()
@import views.html.helper._
@form() = {
		@columnSearchForm{
			@formGroup{	
				<div bt-select placeholder="@Messages("experiments.select.experimentType.transformations")" class="form-control" ng-model="searchService.form.experimentType" ng-class="errors.experimentType" bt-options="experimentType.code as experimentType.name for experimentType in searchService.lists.get('transformations')" ng-change="searchService.changeExperimentType()" auto-select>
				</div>
			}
			@formGroup{
				<div class="form-control" bt-select ng-model="searchService.form.projectCodes" multiple="true" filter="true" placeholder='@Messages("search.placeholder.projects")' bt-options="project.code as project.code for project in searchService.lists.getProjects()" auto-select></div>
			}
			@formGroup{
				<div bt-select placeholder="@Messages("processes.select.processCategory")" class="form-control" ng-model="searchService.form.processCategory" bt-options="processCategory.code as processCategory.name for processCategory in searchService.lists.getProcessCategories()" ng-change="searchService.changeProcessCategory()" auto-select>
				</div>
			}
			
		}
		@columnSearchForm{
			@formGroup{	
				<div bt-select placeholder="@Messages("experiments.select.experimentType.purifications")" class="form-control" ng-model="searchService.form.experimentType" ng-class="errors.experimentType" bt-options="experimentType.code as experimentType.name for experimentType in searchService.lists.get('purifications')" ng-change="searchService.changeExperimentType()" auto-select>
				</div>
			}
			@formGroup{	
					<div class="form-control" bt-select ng-model="searchService.form.sampleCodes" multiple="true" filter="true" placeholder='@Messages("search.placeholder.samples")' bt-options="sample.code as sample.code for sample in searchService.lists.getSamples()" ng-focus="searchService.refreshSamples()" auto-select></div>			
			}
			@formGroup{		
				<div bt-select class="form-control" ng-model="searchService.form.processType" placeholder="@Messages("processes.select.processType")"  bt-options="processType.code as processType.name for processType in searchService.lists.getProcessTypes()" ng-change="changeProcessType()" auto-select>
				</div>
			}
			
		}
		@columnSearchForm{
			@formGroup{	
				<div bt-select placeholder="@Messages("experiments.select.experimentType.qualitycontrols")" class="form-control" ng-model="searchService.form.experimentType" ng-class="errors.experimentType" bt-options="experimentType.code as experimentType.name for experimentType in searchService.lists.get('qualitycontrols')" ng-change="searchService.changeExperimentType()" auto-select>
				</div>
			}
			@formGroup{			
				<input class="form-control" type="text" ng-model="searchService.form.fromDate" placeholder='@Messages("experiment.placeholder.fromDate")'>
			}
			@formGroup{		
				<input class="form-control" type="text" ng-model="searchService.form.containerSupportCode" typeahead="containerSupportCode.code for containerSupportCode in changeContainerSupportCode($viewValue) | limitTo:20 " typeahead-min-length="3" placeholder='@Messages("search.placeholder.support")'>
			}			
		}
		@columnSearchForm{
			@formGroup{	
				<div bt-select placeholder="@Messages("experiments.select.experimentType.transferts")" class="form-control" ng-model="searchService.form.experimentType" ng-class="errors.experimentType" bt-options="experimentType.code as experimentType.name for experimentType in searchService.lists.get('transferts')" ng-change="searchService.changeExperimentType()" auto-select>
				</div>
			}
			@formGroup{	
				<input class="form-control" type="text" ng-model="searchService.form.toDate" placeholder='@Messages("experiment.placeholder.toDate")'>
			}
			@formGroup{
			<input class="form-control" type="text" ng-model="searchService.form.code" typeahead="experiment.code as experiment.name for experiment in searchService.lists.getExperiments() | filter:$viewValue | limitTo:20" placeholder='@Messages("experiment.placeholder.code")'>
			}
		}
		@columnSearchForm{
			@formGroup{		
			<input class="form-control" type="text" ng-model="searchService.form.user" typeahead="user.name as user.name for user in searchService.lists.getUsers() | filter:$viewValue | limitTo:20" placeholder='@Messages("experiment.placeholder.user")'>
			}
			@formGroup{
			<div bt-select placeholder="@Messages("experiments.select.state")" class="form-control" ng-model="searchService.form.state" bt-options="stateCode.code as stateCode.name for stateCode in searchService.lists.getStates()" ng-change="search()" auto-select>
			</div>
			}				
		}
}

@searchForm(form)()("searchService.datatable")