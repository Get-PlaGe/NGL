@()
<!--- FDS 05/10/2016 cree pour gerer le cas des sorties tubes ou plaques et le pooling automatique--->

<!--   TEST FDS  avant tabs....-->
<div class="col-md-12 col-lg-12" ng-switch="atmService.outputContainerSupportCategoryCode">
    <form class="form-inline">
         <div class="form-group col-lg-3" >
           <div ng-switch on="mainService.isEditMode()"> 
           <div ng-switch-when="false">   
                <label for="workLabel" class="control-label">Label de travail</label>
                <span class="form-control-static" ng-bind="rootWorkName"></span> 
            </div>
            <div ng-switch-when="true">
                 <label for="rootWorkName" class="control-label">Label de travail</label>
                 <input class="form-control input-sm" type="text" id="WorkName"
								                      title="Label de travail"
								                      ng-change="updateWorkNames(rootWorkName,atm)"
			 						                  ng-model="rootWorkName" />	
		    </div>
		    </div>  
         </div>
         <div class="form-group col-lg-3">
              <div ng-switch on="mainService.isEditMode()"> 
              <div ng-switch-when="false">   
                   <label for="plateStorage" class="control-label">@Messages("experiments.outputContainerSupportStorageCode")</label>
                   <span class="form-control-static" ng-bind="outputContainerSupport.storageCode"></span> 
              </div>
              <div ng-switch-when="true">
                  <label for="plateStorage" class="control-label">@Messages("experiments.outputContainerSupportStorageCode")</label>
                  <input class="form-control input-sm" type="text" id="plateStorage"
									                   title=@Messages("experiments.outputContainerSupportStorageCode")
									                   ng-change="updateStorageCodes(outputContainerSupport.storageCode,atm)" 
			 						                   ng-model="outputContainerSupport.storageCode" />	
			  </div>
			  </div>   
	     </div>
         <div class="form-group col-lg-3" ng-switch-when="96-well-plate">          
              <div ng-switch on="mainService.isEditMode()"> 
              <div ng-switch-when="false">   
                   <label for="plateCode" class="control-label">@Messages("experiments.outputContainerSupportCode")</label>
                   <span class="form-control-static" ng-bind="outputContainerSupport.code"></span>    
               </div>                           
               <div ng-switch-when="true">
                   <label for="plateCode"  class="control-label">@Messages("experiments.outputContainerSupportCode")</label>
                   <input class="form-control input-sm" type="text" id="plateCode"
									                    title=@Messages("experiments.outputContainerSupportCode")
									                    ng-change="updateSupportCodes(outputContainerSupport.code,atm)"
			  							                ng-model="outputContainerSupport.code" />	
			  </div>
			  </div>   
	     </div>   

    </form>	
</div>	 
<br/>
<!--  END TEST OK -->

<div class="col-md-12 col-lg-12" ng-switch="atmService.inputContainerSupportCategoryCode">
<div ng-switch-when="tube">
	<ul class="nav nav-tabs margin-bottom-5" role="tablist">
	  <li class="active"><a href="" role="tab" data-target="#tube" data-toggle="tab">@Messages("experiments.pools.design")</a></li>
	  <li><a href="" role="tab"  data-target="#roadmap" data-toggle="tab" ng-click="atmService.data.updateDatatable()">@Messages("experiments.calculation.sheet")</a></li>  
	</ul>
	
	<div class="tab-content"  >
		<div class="tab-pane active" id="tube">
			<div class="row">
			<div class="col-md-12 col-lg-12">
			<div class="row">
			<div class="col-md-10 col-lg-10" ng-if="mainService.isEditMode() && isNewState()">
			<!-- InputContainers table -->
				@inputtubes()
			</div>
			<div class="col-md-2 col-lg-2" ng-if="mainService.isEditMode() && isNewState()">
			<!-- Drop buttons -->
			
			<div class="page-header">
				<button class="btn btn-default btn-lg btn-block" ng-click="atmService.data.dropInSelectInputContainer()" ng-disabled="!atmService.data.isSelectInputContainers()">
				<i class="fa fa-sign-in fa-2x"></i>
				</button>
				
				</div>
	
			</div>
			</div>
			<!-- OutputContainers table -->
			<div class="row">
				<div class="col-md-10 col-lg-10 flowcellTable">
				@outputplates()
				</div>
			</div>		
		</div>
		</div>
		</div>		
			
		<div class="tab-pane" id="roadmap">
		<div class="row roadmap">
			<div class="col-md-12 col-lg-12" ultimate-datatable="atmService.data.datatable"></div>
		</div>
		</div>
	</div>		
	</div>
	
<div ng-switch-when="96-well-plate">
<!--- FDS 25/08/2016 MODIF des colonnes pour cause de chevauchement a l'affichage-->
<ul class="nav nav-tabs margin-bottom-5" role="tablist">
  <li class="active"><a href="" role="tab" data-target="#plate" data-toggle="tab">@Messages("experiments.pools.design")</a></li>
  <li><a href="" role="tab"  data-target="#roadmap" data-toggle="tab" ng-click="atmService.data.updateDatatable()">@Messages("experiments.calculation.sheet")</a></li>
  <li><a href="" role="tab"  data-target="#src_dest" data-toggle="tab">@Messages("experiments.src_dest.sheet")</a></li>
</ul>

<div class="tab-content">
	<div class="tab-pane active" id="plate">
		<div class="row"  ng-if="mainService.isEditMode() && isNewState()">
		<div class="col-md-11 col-lg-11">
			@inputplates()
		</div>
		<div class="col-md-1 col-lg-1">
			<div class="page-header">
			<button class="btn btn-default btn-sm btn-block" ng-click="atmService.data.dropInSelectInputContainer()" ng-disabled="!atmService.data.isSelectInputContainers()">
			<i class="fa fa-sign-in fa-2x"></i>
			</button>
			</div>	 
			<button class="btn btn-default btn-sm btn-block" ng-repeat="supportCode in atmService.data.inputContainerSupports" type="button" 
				ng-class="atmService.data.getPlateBtnClass(supportCode)" 
				ng-click="atmService.data.setCurrentSupportCode(supportCode)">
				{{supportCode}}
			</button>	
			<div>
			 <select class="form-control input-sm"
	  					ng-model="poolingMode"
						ng-change="autoPooling(poolingMode)"						
						ng-options="mode as mode.name for mode in poolingModes track by mode.code">  	
						<option value="">pool mode</option>  			    							     	 
	        </select>	
	        </div>
		</div>	
	
		</div>
		<div class="row">
			<div class="col-md-11 col-lg-11 flowcellTable"  ng-switch="atmService.outputContainerSupportCategoryCode">
            <div ng-switch-when="96-well-plate">
			   @outputplates()
			</div>
			<div ng-switch-when="tube">
			   @outputtubes()
			</div>
			</div>
		</div>
	</div>
	
	<div class="tab-pane" id="roadmap">
	<div class="row roadmap">
		<div class="col-md-12 col-lg-12" ultimate-datatable="atmService.data.datatable"></div>
	</div>
	</div>
	
	
	<div class="tab-pane" id="src_dest">
	<div class="row roadmap">
	<div class="col-md-4 col-lg-4">
		<table class="table table-bordered">
			<thead>
				<tr>
					<th>
						@Messages("experiments.src_dest.inputContainerSupportCode")
					</th>
					<th>
						@Messages("experiments.src_dest.source")
					</th>											
				</tr>
				</thead>	
				<!--  containerSupport et pas container -->			
				<tr ng-model="containerSupport" ng-repeat="containerSupport in getInputContainerSupports() | orderBy track by $index" >
					<td>
						{{containerSupport}}
					</td>
					<td>
						{{$index+1}}
					</td>									
				</tr>				
			</table>
		</div>
	<!--  ajout ng-switch car il faut un label dans le cas des tubes en sortie -->
	<div class="col-md-4 col-lg-4"  ng-switch="atmService.outputContainerSupportCategoryCode">
	<div ng-switch-when="96-well-plate">
		<table class="table table-bordered">
			<thead>
				<tr>
					<th>
						@Messages("experiments.src_dest.outputContainerSupportCode")
					</th>
					<th>
						@Messages("experiments.src_dest.dest")
					</th>
					<!-- pas necessaire pour 1 seule paque de sortie..
					<th>
						@Messages("experiments.src_dest.label")
					</th>	
					 -->										
				</tr>
				</thead>	
				<!--  <tr ng-model="container" ng-repeat="container    in getOutputContainerSupports() | orderBy:'locationOnContainerSupport.code' track by $index" >	-->			
				<tr ng-model="containerSupport" ng-repeat="containerSupport in getDistinctOutputContainerSupports()  | orderBy track by $index" >
					<td>
						{{containerSupport.code}}
					</td>
					<td>
						{{$index+1}}
					</td>
					<!-- pas necessaire pour 1 seule paque de sortie..
					<td>
						{{container.experimentProperties.workName.value}}
					</td>		
					-->							
				</tr>				
			</table>
		</div>	
		<div ng-switch-when="tube">
		<table class="table table-bordered">
			<thead>
				<tr>
					<th>
						@Messages("experiments.src_dest.outputContainerSupportCode")
					</th>
					<th>
						@Messages("experiments.src_dest.dest")
					</th>
					<th>
						@Messages("experiments.src_dest.label")
					</th>										
				</tr>
				</thead>	
				<!--  <tr ng-model="container" ng-repeat="container    in getOutputContainerSupports() | orderBy:'locationOnContainerSupport.code' track by $index" >	-->			
				<tr ng-model="containerSupport" ng-repeat="containerSupport in getDistinctOutputContainerSupports()  | orderBy track by $index" >
					<td>
						{{containerSupport.code}}
					</td>
					<td>
						{{$index+1}}
					</td>
					<td>
						{{container.experimentProperties.workName.value}}
					</td>								
				</tr>				
			</table>
		</div>
		</div>
		</div >
	</div>
	</div>
</div>
</div>

</div>