@()
<ul class="nav nav-tabs" role="tablist">
  <li class="active"><a href="" role="tab" data-target="#tube" data-toggle="tab">@Messages("experiments.tube.design")</a></li>
  <li><a href="" role="tab"  data-target="#roadmap" data-toggle="tab">@Messages("experiments.calculation.sheet")</a></li>
</ul>
{{tab}}

<div class="row tab-content tabPaneTable" ng-controller="ManyToOneTubeCtrl" >
	<div class="col-md-12 col-lg-12 tab-pane active" style="margin-right:auto;margin-left:auto" id="tube">
	<div ng-model="inputContainers" ng-if="!editMode || doneAndRecorded || inProgressNow" class="col-md-4 col-lg-4 inputContainerGroupOfTubeTransfert">
		<p><i class="fa fa-download"></i> Inputs</p>
		<table class="table" >
		
		</table>
		</div>
		<!-- InputContainers table -->
		<div ng-model="inputContainers"  class="col-md-4 col-lg-4 inputContainerGroupOfTubeTransfert" droppable ng-if=" editMode && !inProgressNow && !doneAndRecorded">		
		<p  ng-show="inputContainers.length==0"><i class="fa fa-download"></i> Inputs</p> 
			<table class="table" ng-show="inputContainers.length>0">
			<thead>
				<tr>
					<th>
					</th>
					<th>
						@Messages("containers.table.code")
					</th>
					<th>
						@Messages("containers.table.fromExperimentTypeCodes")
					</th>
					<th>
						@Messages("containers.table.tags")
					</th>
					<th>
						@Messages("containers.table.state.code")
					</th>
					<th>
						@Messages("containers.table.volume") (µl)
					</th>
					<th>
						@Messages("containers.table.concentration") (nM)
					</th>
				<!--	<th>
						@Messages("containers.table.inputVolume") (µl) 
					</th>
			  		<th>
						@Messages("containers.table.percentageInsidePool")
					</th>		-->			
				</tr>
				</thead>				
				<tr ng-model="container" ng-repeat="container in inputContainers | orderBy:'code'" >
					<td>
						<button ng-disabled="!experiment.experimentProperties.enabled" ng-click="deleteInput(container)" class="litte-icone"><i class="fa fa-trash-o"></i></button>
					</td>
					<td>
						{{container.code}}
					</td>
					<td>
						{{formatArray(container.fromExperimentTypeCodes)}}
					</td>					
					<td>
						<div list-resize="properties.tag.value in getTags(container.contents) | unique" list-resize-min-size='5' below vertical></div>						
					</td>
					<td>
						{{container.state.code | codes:'state'}}
					</td>
					<td>
						{{container.volume.value}}
					</td>
					<td>
						{{container.concentration.value}}
					</td>
						
			<!-- 		<td>
						{{container.inputExperimentProperties.inputVolume.value}}
					</td>
					<td class="col-sm-1">
						<input class="form-control input-small valueInput" type="text" placeholder="" ng-readonly="!experiment.experimentProperties.enabled" ng-model="container.percentage" title='@Messages("containers.table.percentage")'  ng-blur="changeValueInTransfertTube()"/>										
					</td>  -->
				</tr>				
			</table>
		</div>	
		
		<!-- Drop buttons -->
		<div ng-if="editMode && !inProgressNow && !doneAndRecorded">
		<div ng-if="(experiment.value.atomicTransfertMethods[0].inputContainerUseds.length==0 || inputContainers.length>0 ) && experiment.value.state.code =='N'">
		<button class="dropButtonOfTubeTransfert" ng-click="dropAllInputContainer()" >
		<i class="fa fa-sign-in fa-2x"></i>
		</button>
		</div>
		<div ng-if="inputContainers.length==0 && experiment.value.state.code =='N' ">
		<button class="dropButtonOfTubeTransfert" ng-click="dropOutAllInputContainer()" >
		<i class="fa fa-sign-in fa-2x fa-rotate-180"></i>
		</button>
		</div>
		</div>
		
		<!-- OutputContainers table -->
		<div class="col-md-5 col-lg-5 outputContainersOfTubeTransfert">
			<h2>@Messages("experiments.tubetransfert.design") :</h2> 			
			<table class="table" >
				<thead>
					<tr>
						<th>
							IN
						</th>
						<th>
							OUT
						</th>												
					</tr>
				<thead>
				<tbody>
					<tr class="outputContainers">
						<td>
							<table class="table">								
								<tr>									
									<th>
										@Messages("containers.table.code")
									</th>
									<th>
										@Messages("containers.table.fromExperimentTypeCodes")
									</th>
									<th>
										@Messages("containers.table.tags")
									</th>
									<th>
										@Messages("containers.table.state.code")
									</th>
									<th>
										@Messages("containers.table.volume") (µl)
									</th>
									<th>
										@Messages("containers.table.concentration") (nM)
									</th>
								<!--	<th>
										@Messages("containers.table.inputVolume") (µl) 
									</th>   -->
									<th>
										@Messages("containers.table.percentageInsidePool")
									</th>								
								</tr>
									
								<tr ng-model="inputContainerUsed" ng-repeat="inputContainerUsed in experiment.value.atomicTransfertMethods[0].inputContainerUseds | orderBy:'code'" draggable >									
									<td>
										{{inputContainerUsed.code}}
									</td>
									<td>
										{{formatArray(inputContainerUsed.fromExperimentTypeCodes)}}
									</td>					
									<td>
										<div list-resize="properties.tag.value in getTags(inputContainerUsed.contents) | unique" list-resize-min-size='5' below vertical></div>						
									</td>
									<td>
										{{inputContainerUsed.state.code | codes:'state'}}
									</td>
									<td>
										{{inputContainerUsed.volume.value}}
									</td>
									<td>
										{{inputContainerUsed.concentration.value}}
									</td>   
						<!-- 			<td>
										{{inputContainerUsed.experimentProperties.inputVolume.value}}
									</td> -->
									<td class="col-sm-1">
										<input class="form-control input-small valueInput" type="text" placeholder="" ng-readonly="!experiment.experimentProperties.enabled" ng-model="inputContainerUsed.percentage" title='@Messages("containers.table.percentage")' ng-blur="changeValueInTransfertTube()"/>										
									</td>
								</tr>									
							</table>
						</td>
						<td>
							<table  class="table">
								<tr>
									<th>
										@Messages("containers.table.code")
									</th>
									<th>
										@Messages("containers.table.volume") (µL)
									</th>
								<!-- <th ng-repeat="property in experiment.containerOutProperties">
										{{property.name}}<span ng-if="property.displayMeasureValue"> ({{property.displayMeasureValue.value}})</span>
									</th> -->	
								</tr>
			   					 <tr ng-model="experiment.value.atomicTransfertMethods[0].outputContainerUseds[0]">
									<td >
										{{experiment.value.atomicTransfertMethods[0].outputContainerUseds[0].code}}
									</td>
									<td>
									<input class="form-control valueInput" type="text" title="Messages("containers.table.volume")"
											ng-readonly="!experiment.experimentProperties.enabled"
											ng-model="experiment.value.atomicTransfertMethods[0].outputContainerUseds[0].volume.value"
								   			ng-blur="changeValueInTransfertTube()"								   			
								   			/>										
									</td>
								<!--	<td style="min-width:70px" ng-repeat="property in experiment.containerOutProperties">
										<div ng-switch on="property.choiceInList">
											<input class="form-control valueInput" type="text" ng-switch-when="false" title="{{property.name}}"
											ng-readonly="!experiment.experimentProperties.enabled"
											ng-model="experiment.value.atomicTransfertMethods[0].outputContainerUsed.experimentProperties[property.code].value"
								   			ng-blur="changeValueInTransfertTube()"								   			
								   			/>
									
											<select class="form-control"  
											ng-readonly="!experiment.experimentInformation.enabled" 
											ng-disabled="!experiment.experimentInformation.enabled" 
											ng-model="experiment.value.atomicTransfertMethods[0].outputContainerUsed.experimentProperties[property.code].value"
											ng-switch-when="true" 
											ng-blur="changeValueInTransfertTube()"											
											auto-select>
											<option ng-repeat="opt in property.possibleValues" value="{{opt.value}}">{{opt.value}}</option>
								   			</select>
								  	 </div>
									</td>   -->
								</tr>
							</table>
						</td>				
					</tr>
				</tbody>
				
			</table>
		</div>
		
		
	</div>
	<div class="tab-pane roadmap" id="roadmap">
		<div class="col-md-12 col-lg-12" ultimate-datatable="datatable"></div>
	</div>
</div>		