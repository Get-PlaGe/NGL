@(experiment:models.laboratory.experiment.instance.Experiment)

@import controllers.instruments.io.utils._;

Nr,SampleID,Volume librairie,Volume RSB,Source Plate,Source position,Source Well,Destination Plate,Destination position\u000D\u000A
@for((atm, index) <- experiment.atomicTransfertMethods.sortWith(OutputHelper.sortBylocationSupportOneToOne).zipWithIndex){
	@*** 
	   FDS 31/05/2016 
	   Pour l'instant, ne pas utiliser @(index+1) pour Nr mais le calcul getNumberPositionInPlateByColumn  pour le cas ou  il y a des trous
	   dans la plaque (ou des puits exclus a l'expérience précédente).
	   ...Attente des informations du technicien, il semblerait que le robot ait absolument besoin d'une ligne par puit meme s'il est vide
	   on pourrait alors utiliser @(index+1) pour Nr, mais il faut forcer les volumes a 0 dans ces lignes
	@(index+1),@(atm.inputContainerUseds.get(0).code),@(OutputHelper.getExperimentProperty(atm.inputContainerUseds.get(0), "inputVolume")),@(OutputHelper.getExperimentProperty(atm.inputContainerUseds.get(0), "bufferVolume")),Source,@(OutputHelper.getNumberPositionInPlateByColumn(atm.inputContainerUseds.get(0).locationOnContainerSupport.line,atm.inputContainerUseds.get(0).locationOnContainerSupport.column)),@(atm.inputContainerUseds.get(0).locationOnContainerSupport.line)@(atm.inputContainerUseds.get(0).locationOnContainerSupport.column),Normalized,@(OutputHelper.getNumberPositionInPlateByColumn(atm.outputContainerUseds.get(0).locationOnContainerSupport.line,atm.outputContainerUseds.get(0).locationOnContainerSupport.column))\u000D\u000A
	***@
	@(OutputHelper.getNumberPositionInPlateByColumn(atm.inputContainerUseds.get(0).locationOnContainerSupport.line,atm.inputContainerUseds.get(0).locationOnContainerSupport.column)),@(atm.inputContainerUseds.get(0).code),@(OutputHelper.getExperimentProperty(atm.inputContainerUseds.get(0), "inputVolume")),@(OutputHelper.getExperimentProperty(atm.inputContainerUseds.get(0), "bufferVolume")),Source,@(OutputHelper.getNumberPositionInPlateByColumn(atm.inputContainerUseds.get(0).locationOnContainerSupport.line,atm.inputContainerUseds.get(0).locationOnContainerSupport.column)),@(atm.inputContainerUseds.get(0).locationOnContainerSupport.line)@(atm.inputContainerUseds.get(0).locationOnContainerSupport.column),Normalized,@(OutputHelper.getNumberPositionInPlateByColumn(atm.outputContainerUseds.get(0).locationOnContainerSupport.line,atm.outputContainerUseds.get(0).locationOnContainerSupport.column))\u000D\u000A
}
